webpackJsonp([17],{GxKD:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=s("vLgD"),a={name:"application",data:function(){return{services:[],apps:[],selectedService:"",createVisible:!1,tempCreate:{},editVisible:!1,tempEdit:{}}},directives:{waves:s("cAgV").a},methods:{editSubmit:function(){var e=this;Object(i.a)({url:"/ops/app/update",method:"POST",params:{app:this.tempEdit.name,service:this.tempEdit.service,desc:this.tempEdit.desc}}).then(function(t){e.editVisible=!1,e.loadApps(),e.$message({message:"eidt ok",type:"success",duration:3e3,center:!0})})},handleEdit:function(e){this.tempEdit=e,this.editVisible=!0},createSubmit:function(){var e=this;Object(i.a)({url:"/ops/app/create",method:"POST",params:{app:this.tempCreate.name,service:this.selectedService,desc:this.tempCreate.desc}}).then(function(t){e.tempCreate={},e.createVisible=!1,e.loadApps(),e.$message({message:"create ok",type:"success",duration:3e3,center:!0})})},handleCreate:function(){this.createVisible=!0},handleSelService:function(e){this.$store.dispatch("setService",e),this.selectedService=e,this.loadApps()},calcService:function(){return this.selectedService||this.$store.getters.service},loadServices:function(){var e=this;Object(i.a)({url:"/ops/service/query",method:"GET",params:{}}).then(function(t){e.services=t.data.data})},loadApps:function(){var e=this;Object(i.a)({url:"/ops/app/query",method:"GET",params:{service:this.selectedService}}).then(function(t){e.apps=t.data.data})}},mounted:function(){this.loadServices(),this.selectedService=this.$store.getters.service,""!=this.selectedService&&this.loadApps()},destroyed:function(){}},l={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"app-container"},[s("div",{staticClass:"filter-container"},[s("el-tag",[e._v(e._s(e.$t("common.service")))]),e._v(" "),s("el-select",{staticClass:"filter-item",staticStyle:{width:"200px"},attrs:{clearable:"",value:e.calcService(),placeholder:e.$t("common.selectService")},on:{change:e.handleSelService}},e._l(e.services,function(e){return s("el-option",{key:e.name,attrs:{label:e.name,value:e.name}})})),e._v(" "),s("el-button",{directives:[{name:"waves",rawName:"v-waves"}],staticClass:"filter-item",staticStyle:{"margin-left":"10px"},attrs:{type:"success",icon:"el-icon-plus"},on:{click:e.handleCreate}},[e._v(e._s(e.$t("ops.addApp")))])],1),e._v(" "),s("div",{staticClass:"table"},[s("el-table",{staticStyle:{width:"100%"},attrs:{data:e.apps,border:"",fit:"","highlight-current-row":"","default-sort":{prop:"modify_date",order:"descending"}}},[s("el-table-column",{attrs:{align:"center",label:e.$t("common.name"),width:"250",prop:"name",sortable:""},scopedSlots:e._u([{key:"default",fn:function(t){return[s("span",[e._v(e._s(t.row.name))])]}}])}),e._v(" "),s("el-table-column",{attrs:{width:"200",align:"center",label:e.$t("common.service"),sortable:""},scopedSlots:e._u([{key:"default",fn:function(t){return[s("span",[e._v(e._s(t.row.service))])]}}])}),e._v(" "),s("el-table-column",{attrs:{width:"350",align:"center",label:e.$t("common.desc")},scopedSlots:e._u([{key:"default",fn:function(t){return[s("span",[e._v(e._s(t.row.desc))])]}}])}),e._v(" "),s("el-table-column",{attrs:{align:"center",label:e.$t("common.operate"),"class-name":"small-padding"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("el-button",{attrs:{size:"mini"},on:{click:function(s){e.handleEdit(t.row)}}},[e._v(e._s(e.$t("common.edit")))])]}}])})],1)],1),e._v(" "),s("el-dialog",{attrs:{title:e.$t("ops.addApp"),visible:e.createVisible},on:{"update:visible":function(t){e.createVisible=t}}},[s("el-form",{staticStyle:{width:"500px","margin-left":"50px"},attrs:{"label-position":"left","label-width":"70px"}},[s("el-form-item",{attrs:{label:e.$t("common.name"),prop:"name"}},[s("el-input",{attrs:{placeholder:e.$t("ops.serviceNameTips")},model:{value:e.tempCreate.name,callback:function(t){e.$set(e.tempCreate,"name",t)},expression:"tempCreate.name"}})],1),e._v(" "),s("el-form-item",{attrs:{label:e.$t("common.service")}},[e._v("\n          "+e._s(e.selectedService)+"\n        ")]),e._v(" "),s("el-form-item",{attrs:{label:e.$t("common.desc")}},[s("el-input",{attrs:{type:"textarea",autosize:{minRows:2,maxRows:4},placeholder:e.$t("common.descTips")},model:{value:e.tempCreate.desc,callback:function(t){e.$set(e.tempCreate,"desc",t)},expression:"tempCreate.desc"}})],1)],1),e._v(" "),s("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{on:{click:function(t){e.createVisible=!1}}},[e._v(e._s(e.$t("common.cancel")))]),e._v(" "),s("el-button",{attrs:{type:"primary"},on:{click:e.createSubmit}},[e._v(e._s(e.$t("common.submit")))])],1)],1),e._v(" "),s("el-dialog",{attrs:{title:e.$t("ops.editApp"),visible:e.editVisible},on:{"update:visible":function(t){e.editVisible=t}}},[s("el-form",{staticStyle:{width:"500px","margin-left":"50px"},attrs:{"label-position":"left","label-width":"70px"}},[s("el-form-item",{attrs:{label:e.$t("common.name"),prop:"name"}},[e._v("\n          "+e._s(e.tempEdit.name)+"\n        ")]),e._v(" "),s("el-form-item",{attrs:{label:e.$t("common.service")}},[e._v("\n          "+e._s(e.tempEdit.service)+"\n        ")]),e._v(" "),s("el-form-item",{attrs:{label:e.$t("common.desc")}},[s("el-input",{attrs:{type:"textarea",autosize:{minRows:2,maxRows:4},placeholder:e.$t("common.descTips")},model:{value:e.tempEdit.desc,callback:function(t){e.$set(e.tempEdit,"desc",t)},expression:"tempEdit.desc"}})],1)],1),e._v(" "),s("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{on:{click:function(t){e.editVisible=!1}}},[e._v(e._s(e.$t("common.cancel")))]),e._v(" "),s("el-button",{attrs:{type:"primary"},on:{click:e.editSubmit}},[e._v(e._s(e.$t("common.submit")))])],1)],1)],1)},staticRenderFns:[]},c=s("VU/8")(a,l,!1,null,null,null);t.default=c.exports}});