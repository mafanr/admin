webpackJsonp([9],{JfZ3:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a("vLgD"),s=a("vMJZ"),r={name:"users",data:function(){return{createVisible:!1,tempCreate:{},users:[],editVisible:!1,tempEdit:{}}},methods:{editSubmit:function(){var e=this;Object(i.a)({url:"/user/edit",method:"POST",params:{username:this.tempEdit.username,priv:this.tempEdit.priv}}).then(function(t){e.$message({message:"edit user ok",type:"success",duration:3e3,center:!0}),e.editVisible=!1,Object(s.a)().then(function(t){e.users=t.data.data})})},editUser:function(e){this.tempEdit=e,this.editVisible=!0},handleCreate:function(){this.createVisible=!0},createSubmit:function(){var e=this;Object(i.a)({url:"/user/add",method:"POST",params:{username:this.tempCreate.username,priv:this.tempCreate.priv}}).then(function(t){e.$message({message:"add user ok",type:"success",duration:3e3,center:!0}),e.tempCreate={},e.createVisible=!1,Object(s.a)().then(function(t){e.users=t.data.data})})},deleteUser:function(e){var t=this;this.$confirm("Are you sure to delete the user : "+e+"?","Warning",{dangerouslyUseHTMLString:!0,cancelButtonText:"cancel",confirmButtonText:"submit",type:"warning"}).then(function(){Object(i.a)({url:"/user/delete",method:"POST",params:{username:e}}).then(function(e){Object(s.a)().then(function(e){t.users=e.data.data}),t.$message({message:"delete user ok",type:"success",duration:3e3,center:!0})})})}},mounted:function(){var e=this;Object(s.a)().then(function(t){e.users=t.data.data})},destroyed:function(){}},l={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-container"},[a("div",{staticClass:"filter-container"},[a("el-button",{staticClass:"filter-item",staticStyle:{"margin-left":"10px"},attrs:{type:"success",icon:"el-icon-edit"},on:{click:e.handleCreate}},[e._v("Add User")])],1),e._v(" "),a("div",{staticClass:"table"},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.users,border:"",fit:"","highlight-current-row":"","default-sort":{prop:"create_date",order:"ascending"}}},[a("el-table-column",{attrs:{align:"center",label:"user name",width:"250",prop:"name",sortable:""},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.username))])]}}])}),e._v(" "),a("el-table-column",{attrs:{width:"250",align:"center",label:"privilege",prop:"creator",sortable:""},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.priv))])]}}])}),e._v(" "),a("el-table-column",{attrs:{width:"250",align:"center",label:"create date",prop:"admins"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.create_date))])]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"center",label:"操作","class-name":"small-padding"},scopedSlots:e._u([{key:"default",fn:function(t){return["admin"!=t.row.username?a("el-button",{attrs:{size:"mini"},on:{click:function(a){e.editUser(t.row)}}},[e._v("Edit")]):e._e(),e._v(" "),"admin"!=t.row.username?a("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(a){e.deleteUser(t.row.username)}}},[e._v("Delete")]):e._e()]}}])})],1)],1),e._v(" "),a("el-dialog",{staticClass:"mf-dialog",attrs:{title:"Add User",visible:e.createVisible},on:{"update:visible":function(t){e.createVisible=t}}},[a("el-form",{staticStyle:{width:"400px","margin-left":"50px"},attrs:{"label-position":"left","label-width":"100px"}},[a("el-form-item",{attrs:{label:"user name"}},[a("el-input",{attrs:{placeholder:"only support alphabet and numeric"},model:{value:e.tempCreate.username,callback:function(t){e.$set(e.tempCreate,"username",t)},expression:"tempCreate.username"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"privilege"}},[a("el-select",{staticClass:"filter-item",staticStyle:{width:"200px"},attrs:{placeholder:"select priv"},model:{value:e.tempCreate.priv,callback:function(t){e.$set(e.tempCreate,"priv",t)},expression:"tempCreate.priv"}},[a("el-option",{attrs:{label:"normal",value:"normal"}}),e._v(" "),a("el-option",{attrs:{label:"admin",value:"admin"}})],1)],1),e._v(" "),a("el-alert",{attrs:{closable:!1,title:"Only username 'admin' can operate",type:"warning"}})],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.createVisible=!1}}},[e._v("Cancel")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.createSubmit}},[e._v("Submit")])],1)],1),e._v(" "),a("el-dialog",{staticClass:"mf-dialog",attrs:{title:"Edit User",visible:e.editVisible},on:{"update:visible":function(t){e.editVisible=t}}},[a("el-form",{staticStyle:{width:"400px","margin-left":"50px"},attrs:{"label-position":"left","label-width":"100px"}},[a("el-form-item",{attrs:{label:"user name"}},[e._v("\n           "+e._s(e.tempEdit.username)+"\n        ")]),e._v(" "),a("el-form-item",{attrs:{label:"privilege"}},[a("el-select",{staticClass:"filter-item",staticStyle:{width:"200px"},attrs:{placeholder:"select priv",disabled:"admin"==e.tempEdit.username},model:{value:e.tempEdit.priv,callback:function(t){e.$set(e.tempEdit,"priv",t)},expression:"tempEdit.priv"}},[a("el-option",{attrs:{label:"admin",value:"admin"}}),e._v(" "),a("el-option",{attrs:{label:"normal",value:"normal"}})],1)],1),e._v(" "),a("el-alert",{attrs:{closable:!1,title:"Only username 'admin' can operate",type:"warning"}})],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.editVisible=!1}}},[e._v("Cancel")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.editSubmit}},[e._v("Submit")])],1)],1)],1)},staticRenderFns:[]},n=a("VU/8")(r,l,!1,null,null,null);t.default=n.exports}});