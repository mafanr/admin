webpackJsonp([17],{GxKD:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=i("vLgD"),s={name:"application",data:function(){return{services:[],apps:[],selectedService:"",createVisible:!1,tempCreate:{},editVisible:!1,tempEdit:{}}},directives:{waves:i("cAgV").a},methods:{editSubmit:function(){var e=this;Object(a.a)({url:"/ops/app/update",method:"POST",params:{app:this.tempEdit.name,service:this.tempEdit.service,desc:this.tempEdit.desc}}).then(function(t){e.editVisible=!1,e.loadApps(),e.$message({message:"eidt ok",type:"success",duration:3e3,center:!0})})},handleEdit:function(e){this.tempEdit=e,this.editVisible=!0},createSubmit:function(){var e=this;Object(a.a)({url:"/ops/app/create",method:"POST",params:{app:this.tempCreate.name,service:this.selectedService,desc:this.tempCreate.desc}}).then(function(t){e.tempCreate={},e.createVisible=!1,e.loadApps(),e.$message({message:"创建成功",type:"success",duration:3e3,center:!0})})},handleCreate:function(){this.createVisible=!0},handleSelService:function(e){this.$store.dispatch("setService",e),this.selectedService=e,this.loadApps()},calcService:function(){return this.selectedService||this.$store.getters.service},loadServices:function(){var e=this;Object(a.a)({url:"/ops/service/query",method:"GET",params:{}}).then(function(t){e.services=t.data.data})},loadApps:function(){var e=this;Object(a.a)({url:"/ops/app/query",method:"GET",params:{service:this.selectedService}}).then(function(t){e.apps=t.data.data})}},mounted:function(){this.loadServices(),this.selectedService=this.$store.getters.service,""!=this.selectedService&&this.loadApps()},destroyed:function(){}},l={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"app-container"},[i("div",{staticClass:"filter-container"},[i("el-tag",[e._v("service")]),e._v(" "),i("el-select",{staticClass:"filter-item",staticStyle:{width:"200px"},attrs:{clearable:"",value:e.calcService(),placeholder:"请选择Service"},on:{change:e.handleSelService}},e._l(e.services,function(e){return i("el-option",{key:e.name,attrs:{label:e.name,value:e.name}})})),e._v(" "),i("el-button",{directives:[{name:"waves",rawName:"v-waves"}],staticClass:"filter-item",staticStyle:{"margin-left":"10px"},attrs:{type:"success",icon:"el-icon-plus"},on:{click:e.handleCreate}},[e._v("Add App")])],1),e._v(" "),i("div",{staticClass:"table"},[i("el-table",{staticStyle:{width:"100%"},attrs:{data:e.apps,border:"",fit:"","highlight-current-row":"","default-sort":{prop:"modify_date",order:"descending"}}},[i("el-table-column",{attrs:{align:"center",label:"Name",width:"250",prop:"name",sortable:""},scopedSlots:e._u([{key:"default",fn:function(t){return[i("span",[e._v(e._s(t.row.name))])]}}])}),e._v(" "),i("el-table-column",{attrs:{width:"200",align:"center",label:"Service",sortable:""},scopedSlots:e._u([{key:"default",fn:function(t){return[i("span",[e._v(e._s(t.row.service))])]}}])}),e._v(" "),i("el-table-column",{attrs:{width:"350",align:"center",label:"Description"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("span",[e._v(e._s(t.row.desc))])]}}])}),e._v(" "),i("el-table-column",{attrs:{align:"center",label:"Operate","class-name":"small-padding"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("el-button",{attrs:{size:"mini"},on:{click:function(i){e.handleEdit(t.row)}}},[e._v("Edit")])]}}])})],1)],1),e._v(" "),i("el-dialog",{attrs:{title:"Create application",visible:e.createVisible},on:{"update:visible":function(t){e.createVisible=t}}},[i("el-form",{staticStyle:{width:"500px","margin-left":"50px"},attrs:{"label-position":"left","label-width":"70px"}},[i("el-form-item",{attrs:{label:"name",prop:"name"}},[i("el-input",{attrs:{placeholder:"only support alhpabet,once created,it cant be changed"},model:{value:e.tempCreate.name,callback:function(t){e.$set(e.tempCreate,"name",t)},expression:"tempCreate.name"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"service"}},[e._v("\n          "+e._s(e.selectedService)+"\n        ")]),e._v(" "),i("el-form-item",{attrs:{label:"desc"}},[i("el-input",{attrs:{type:"textarea",autosize:{minRows:2,maxRows:4},placeholder:"describe the app"},model:{value:e.tempCreate.desc,callback:function(t){e.$set(e.tempCreate,"desc",t)},expression:"tempCreate.desc"}})],1)],1),e._v(" "),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(t){e.createVisible=!1}}},[e._v("Cancel")]),e._v(" "),i("el-button",{attrs:{type:"primary"},on:{click:e.createSubmit}},[e._v("Submit")])],1)],1),e._v(" "),i("el-dialog",{attrs:{title:"Edit application",visible:e.editVisible},on:{"update:visible":function(t){e.editVisible=t}}},[i("el-form",{staticStyle:{width:"500px","margin-left":"50px"},attrs:{"label-position":"left","label-width":"70px"}},[i("el-form-item",{attrs:{label:"name",prop:"name"}},[e._v("\n          "+e._s(e.tempEdit.name)+"\n        ")]),e._v(" "),i("el-form-item",{attrs:{label:"service"}},[e._v("\n          "+e._s(e.tempEdit.service)+"\n        ")]),e._v(" "),i("el-form-item",{attrs:{label:"desc"}},[i("el-input",{attrs:{type:"textarea",autosize:{minRows:2,maxRows:4},placeholder:"describe the app"},model:{value:e.tempEdit.desc,callback:function(t){e.$set(e.tempEdit,"desc",t)},expression:"tempEdit.desc"}})],1)],1),e._v(" "),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(t){e.editVisible=!1}}},[e._v("Cancel")]),e._v(" "),i("el-button",{attrs:{type:"primary"},on:{click:e.editSubmit}},[e._v("Submit")])],1)],1)],1)},staticRenderFns:[]},r=i("VU/8")(s,l,!1,null,null,null);t.default=r.exports}});